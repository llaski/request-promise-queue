<!DOCTYPE html>
<html>
<head>
	<title>Example</title>
</head>
<body>
	<p>List Of Responses</p>
	<ul id="response-list"></ul>

	<script src="/RequestPromiseQueue.js"></script>

	<script>
		var responseList = document.getElementById('response-list');
		var url = 'http://jsonplaceholder.typicode.com/posts/1';

		function displayResults(results) {
			results.forEach(function(resultSet) {

				if (Array.isArray(resultSet)) {
					displayResults(resultSet);
					return;
				}

				var li = document.createElement('li');
				li.innerHTML = JSON.parse(resultSet.body).title;
				responseList.appendChild(li);
			});
		};

		RequestPromiseQueue.send(url, {}, { data: Array.from(Array(20).keys()), size: 5 } ).then(function(results) {
			displayResults(results);
		});
	</script>
</body>
</html>